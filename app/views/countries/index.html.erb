

<p id="notice"><%= notice %></p>
<h1><i class="far fa-flag"></i>  Countries</h1>
<button type="button" name="button" class="btn btn-info" data-toggle="modal" data-target="#new">New Country</button>
<ul class="nav nav-tabs">
  <br>
  <li class="active"><a data-toggle="tab" href="#active">Active</a></li>
  <li><a data-toggle="tab" href="#inactive">Inactive</a></li>
</ul>

<div class="tab-content">
  <div id="active" class="tab-pane fade in active">
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody id="countries">
    <% @countries.each do |country| %>
      <tr>
        <td><%= country %></td>
        <td><%= link_to raw("<i class='fas fa-search'></i>"), country, class:"btn btn-xs", title: "Show"%></td>
        <td><%= link_to raw("<i class='fas fa-pencil-alt'></i>"), edit_country_path(country), class:"btn btn-xs", title: "Edit" %></td>
        <td><%= link_to raw("<i class='fas fa-trash'></i>"), country, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-xs", title: "Remove" %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<div id="inactive" class="tab-pane fade">
<table>
  <thead>
    <tr>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <% @removed_Countries.each do |country| %>
      <tr>
        <td><%= country %></td>
        <td><%= link_to raw("<i class='fas fa-undo-alt'></i>"), country, method: :delete, class:"btn btn-xs", title: "Restore" %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
</div>
<br>
<%= link_to 'New Country', new_country_path, class: 'btn btn-xs'%> |
<%= link_to 'Back', root_path, class: 'btn btn-xs' %>
<br><br><br>
<div class="modal fade" id="new" role="dialog">
<div class="modal-dialog">
<div class="modal-content">
  <div class="modal-header">
    <h3 class="modal-title">New Country</h3>
  </div>
  <div class="modal-body">
    <div id="country">
      <label>Name:</label>
      <input id="name" type="text" name="" value="">
      <div class="actions">
        <br>
        <p class="right">
          <button onclick="add_country();" type="button" name="button" data-dismiss="modal">Add new country</button>
        </p>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <p class="left">
      <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
    </p>
  </div>
</div>
</div>
</div>
<script type="text/javascript">
  function add_country(){
    country=$('div[id="country"] input')
    name=country[0].value
    $.ajax(
      {
        type:'put',
        url:'/new_country',
        data:{
          name:name
        },
      success: function(country)
      {
        var $row=$(
          '<tr>'+
          '<td>'+country.name+'</td>'+
          '<td>'+'<a href="countries/'+country.id+'">'+'Show'+'</a>'+'</td>'+
          '<td>'+'<a href="countries/'+country.id+'/edit">'+'Edit'+'</a>'+'</td>'+
          '<td>'+'<a data-confirm="Are you sure?" rel="nofollow" data-method="delete" href="countries/'+country.id+'">'+'Remove'+'</a>'+'</td>'+
          '</tr>'
        );
        $("#countries").append($row);
      }
    });
  }
</script>
